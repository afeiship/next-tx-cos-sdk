/*!
 * name: @jswork/next-tx-cos-sdk
 * description: Tencent cos-nodejs-sdk wrapper.
 * homepage: https://github.com/afeiship/next-tx-cos-sdk
 * version: 1.0.0
 * date: 2020-11-21 11:10:59
 * license: MIT
 */
!function(){this||window||Function("return this")();var t=require("cos-nodejs-sdk-v5"),e={SecretId:"COS_SECRETID",SecretKey:"COS_SECRETKEY"},n=nx.declare("nx.TxCosSdk",{methods:{init:function(n){this.options=nx.mix(null,e,n),this.cos=new t(this.options)},put:function(n){var t=this;return new Promise(function(e,r){return t.cos.putBucket(n,function(n,t){return n?r(n):void e(t)})})},del:function(n){var t=this;return new Promise(function(e,r){return t.cos.deleteBucket(n,function(n,t){return n?r(n):void e(t)})})},clear:function(n){var r=this;return new Promise(function(t,e){r.objClear(n).then(function(){r.del(n).then(function(n){t(n)}).catch(function(n){e(n)})})})},get:function(n){var t=this;return new Promise(function(e,r){return t.cos.getBucket(n,function(n,t){return n?r(n):void e(t)})})},list:function(){var n=this;return new Promise(function(e,r){return n.cos.getService(function(n,t){return n?r(n):void e(t)})})},aclPut:function(n){var t=this;return new Promise(function(e,r){return t.cos.putBucketAcl(n,function(n,t){return n?r(n):void e(t)})})},objUpload:function(n){var t=this;return new Promise(function(e,r){return t.cos.putObject(n,function(n,t){return n?r(n):void e(t)})})},objDelete:function(n){var t=this;return new Promise(function(e,r){return t.cos.deleteObject(n,function(n,t){return n?r(n):void e(t)})})},objClear:function(r){var o=this;return new Promise(function(t,e){o.get(r).then(function(n){n=n.Contents.map(function(n){return{Key:n.Key}});o.objDeleteMulti(n,r).then(t).catch(e)})})},objDeleteMulti:function(n,t){if(!n||!n.length)return Promise.resolve();var o=this,i=nx.mix({Bucket:null,Region:"ap-chengdu",Objects:n},t);return new Promise(function(e,r){return o.cos.deleteMultipleObject(i,function(n,t){return n?r(n):void e(t)})})}}});"undefined"!=typeof module&&module.exports&&(module.exports=n)}();